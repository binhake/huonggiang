<!doctype html>
<html lang="vi">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>EventBuddy ‚Äì Prototype (Full)</title>
    <style>
        :root {
            --bg: #fff6fa;
            --pink: #ffc7dd;
            --accent: #ff8fb3;
            --muted: #8b5a66;
            --card: #fff0f7;
            --shadow: 0 8px 24px rgba(255, 110, 150, 0.12);
            --radius: 18px;
            font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        }
        
        * {
            box-sizing: border-box
        }
        
        body {
            margin: 0;
            background: var(--bg);
            color: #2b2b2b;
            -webkit-font-smoothing: antialiased;
        }
        
        .screen {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 18px 16px 110px;
            opacity: 0;
            transform: translateY(6px)
        }
        
        .screen.show {
            opacity: 1;
            transform: none;
            transition: opacity .36s cubic-bezier(.2, .9, .2, 1), transform .36s cubic-bezier(.2, .9, .2, 1)
        }
        
        .card {
            width: 100%;
            max-width: 420px;
            background: var(--card);
            border-radius: 16px;
            padding: 14px;
            box-shadow: var(--shadow);
            margin-bottom: 12px;
            overflow: hidden
        }
        
        .header {
            width: 100%;
            max-width: 420px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        
        .avatar {
            width: 46px;
            height: 46px;
            border-radius: 12px;
            background: linear-gradient(180deg, #ffd6e6, #ffcce0);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: #6b2140
        }
        
        h1.main {
            font-size: 20px;
            margin: 0 0 6px 0;
            color: #6b2140
        }
        
        p.sub {
            margin: 0;
            color: var(--muted);
            font-size: 13px
        }
        
        .small {
            font-size: 13px;
            color: var(--muted)
        }
        /* onboarding */
        
        .onboard-wrap {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.28);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 18px;
            z-index: 60;
            animation: fadeInModal .26s ease
        }
        
        @keyframes fadeInModal {
            from {
                opacity: 0
            }
            to {
                opacity: 1
            }
        }
        
        .onboard {
            width: 100%;
            max-width: 520px;
            background: white;
            border-radius: 20px;
            padding: 18px;
            box-shadow: 0 18px 40px rgba(0, 0, 0, 0.25);
            overflow: hidden
        }
        
        .slides {
            display: flex;
            gap: 12px;
            transition: transform .46s cubic-bezier(.2, .9, .2, 1);
            will-change: transform
        }
        
        .slide {
            min-width: 100%
        }
        
        .dots {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-top: 10px
        }
        
        .dot {
            width: 10px;
            height: 10px;
            border-radius: 10px;
            background: #eee
        }
        
        .dot.active {
            background: var(--accent)
        }
        
        .onboard h2 {
            margin: 8px 0 4px 0;
            color: #5b2440
        }
        
        .onboard p {
            margin: 0;
            color: var(--muted)
        }
        
        .onboard .btn {
            margin-top: 12px;
            padding: 10px 14px;
            border-radius: 12px;
            border: none;
            background: var(--accent);
            color: white;
            font-weight: 700;
            cursor: pointer
        }
        
        .onboard .btn.ghost {
            background: transparent;
            color: var(--accent);
            border: 1px solid #ffd6e6
        }
        /* bottom nav */
        
        .bottomnav {
            position: fixed;
            left: 0;
            right: 0;
            bottom: 18px;
            display: flex;
            justify-content: center;
            pointer-events: none
        }
        
        .navwrap {
            width: 100%;
            max-width: 420px;
            background: transparent;
            padding: 6px 12px;
            pointer-events: auto
        }
        
        .nav {
            display: flex;
            gap: 8px;
            background: linear-gradient(90deg, #fff, #fff);
            border-radius: 28px;
            padding: 8px 8px;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06)
        }
        
        .nav button {
            flex: 1;
            background: transparent;
            border: none;
            padding: 8px;
            border-radius: 18px;
            font-size: 13px
        }
        
        .nav button.active {
            background: linear-gradient(180deg, var(--pink), var(--accent));
            color: white;
            box-shadow: 0 6px 12px rgba(255, 120, 150, 0.12)
        }
        /* features */
        
        .features {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 8px
        }
        
        .feat {
            flex: 0 0 46%;
            display: flex;
            align-items: center;
            gap: 8px;
            background: white;
            padding: 8px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.03)
        }
        
        .btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 10px 12px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer
        }
        /* feed */
        
        .event {
            background: white;
            padding: 12px;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
            box-shadow: 0 6px 14px rgba(0, 0, 0, 0.03)
        }
        
        .event h3 {
            margin: 0;
            font-size: 15px;
            color: #4a1d33
        }
        
        .chip {
            background: linear-gradient(180deg, #fff8fb, #fff0f6);
            padding: 6px 8px;
            border-radius: 10px;
            font-size: 12px;
            color: #8b4a5b
        }
        /* AI card */
        
        .ai-card {
            background: linear-gradient(180deg, #fff0f7, #fff5f9);
            padding: 12px;
            border-radius: 14px;
            box-shadow: 0 8px 24px rgba(255, 100, 150, 0.06)
        }
        
        .ai-bubble {
            background: white;
            padding: 10px;
            border-radius: 12px;
            box-shadow: 0 6px 14px rgba(0, 0, 0, 0.03);
            margin-bottom: 8px;
            min-height: 46px;
            display: flex;
            align-items: center
        }
        
        .ai-controls {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
            align-items: center
        }
        
        .ai-controls .ghost {
            background: #fff;
            border: 1px solid #ffd1dd;
            color: var(--accent)
        }
        
        .typing {
            border-right: 2px solid rgba(80, 20, 40, 0.6);
            padding-right: 6px
        }
        /* map/route */
        
        .map {
            height: 180px;
            border-radius: 12px;
            background: linear-gradient(180deg, #ffeef6, #fff);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--muted)
        }
        
        .routecard {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin-top: 10px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 6px 14px rgba(0, 0, 0, 0.03)
        }
        /* toast */
        
        .toast {
            position: fixed;
            left: 50%;
            transform: translateX(-50%);
            bottom: 110px;
            background: #ffffffaa;
            border: 1px solid #ffd6e6;
            padding: 8px 12px;
            border-radius: 12px;
            color: #6b2140;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
            z-index: 80;
            backdrop-filter: blur(4px);
            opacity: 0;
            transition: opacity .3s ease
        }
        
        .toast.show {
            opacity: 1
        }
        
        footer {
            height: 88px
        }
        
        @media(min-width:520px) {
            .screen {
                padding-top: 40px
            }
            .card {
                margin-bottom: 18px
            }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>

<body>

    <!-- Onboarding modal -->
    <div id="onboardWrap" class="onboard-wrap" aria-hidden="false">
        <div class="onboard">
            <div style="display:flex;justify-content:space-between;align-items:center">
                <strong style="color:#6b2140">Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi EventBuddy</strong>
                <button id="skipBtn" class="btn ghost">B·ªè qua</button>
            </div>

            <div style="overflow:hidden;margin-top:12px">
                <div id="slides" class="slides">
                    <div class="slide" style="padding:12px 8px">
                        <div style="display:flex;gap:12px;align-items:center">
                            <svg width="96" height="96" viewBox="0 0 96 96">
                                <rect rx="18" width="96" height="96" fill="#ffeaf3" />
                                <circle cx="48" cy="44" r="18" fill="#ffd0e0" />
                                <path d="M36 64c6 6 24 6 30 0" stroke="#b24a65" stroke-width="3" fill="none" />
                            </svg>
                            <div>
                                <h2>Ng∆∞·ªùi b·∫°n ƒë·ªìng h√†nh c·ªßa sinh vi√™n</h2>
                                <p>EventBuddy gi√∫p b·∫°n t√¨m s·ª± ki·ªán ph√π h·ª£p, gh√©p xe an to√†n v√† nh·∫Øc l·ªãch th√¥ng minh.</p>
                            </div>
                        </div>
                        <div style="margin-top:12px;display:flex;justify-content:flex-end">
                            <button class="btn" id="next1">Ti·∫øp theo</button>
                        </div>
                    </div>

                    <div class="slide" style="padding:12px 8px">
                        <div style="display:flex;gap:12px;align-items:center">
                            <svg width="96" height="96" viewBox="0 0 96 96">
                                <rect rx="18" width="96" height="96" fill="#fff1f8" />
                                <path d="M28 66l18-32 18 32" stroke="#ff8fb3" stroke-width="4" fill="none" />
                                <circle cx="48" cy="36" r="6" fill="#ff8fb3" />
                            </svg>
                            <div>
                                <h2>AI g·ª£i √Ω ph√π h·ª£p</h2>
                                <p>AI s·∫Ω ph√¢n t√≠ch l·ªãch h·ªçc + s·ªü th√≠ch ƒë·ªÉ ƒë·ªÅ xu·∫•t event m√† b·∫°n c√≥ th·ªÉ tham gia ngay.</p>
                            </div>
                        </div>
                        <div style="margin-top:12px;display:flex;justify-content:flex-end">
                            <button class="btn" id="next2">Ti·∫øp theo</button>
                        </div>
                    </div>

                    <div class="slide" style="padding:12px 8px">
                        <div style="display:flex;gap:12px;align-items:center">
                            <svg width="96" height="96" viewBox="0 0 96 96">
                                <rect rx="18" width="96" height="96" fill="#fff2f4" />
                                <path d="M26 60h44v-4a10 10 0 0 0-10-10H36a10 10 0 0 0-10 10z" fill="#ffcbdc" />
                            </svg>
                            <div>
                                <h2>Gh√©p xe & ƒëi c√πng</h2>
                                <p>Ti·∫øt ki·ªám chi ph√≠, an to√†n v√† vui h∆°n khi c√≥ b·∫°n ƒë·ªìng h√†nh.</p>
                            </div>
                        </div>
                        <div style="margin-top:12px;display:flex;justify-content:flex-end;gap:8px">
                            <button class="btn ghost" id="laterBtn">B·∫Øt ƒë·∫ßu sau</button>
                            <button class="btn" id="startBtn">B·∫Øt ƒë·∫ßu th√¥i!</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dots" style="margin-top:8px;justify-content:center">
                <div id="dot0" class="dot active"></div>
                <div id="dot1" class="dot"></div>
                <div id="dot2" class="dot"></div>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast">ƒê√£ l∆∞u cho sau</div>

    <!-- Screens -->
    <main id="screen-home" class="screen show">
        <div class="header">
            <div>
                <div class="avatar">B</div>
            </div>
            <div style="text-align:right">
                <div style="font-size:12px;color:var(--muted)">Xin ch√†o,</div>
                <div style="font-weight:700;color:#6b2140">B√¥ng ∆°i üíï</div>
                <div class="small">H√¥m nay c√≥ g√¨ hay nha?</div>
            </div>
        </div>

        <div class="card">
            <div style="display:flex;align-items:center;justify-content:space-between">
                <div>
                    <h1 class="main">Ch√†o m·ª´ng ƒë·∫øn v·ªõi EventBuddy</h1>
                    <p class="sub">Ng∆∞·ªùi b·∫°n ƒë·ªìng h√†nh gi√∫p b·∫°n kh√¥ng b·ªè l·ª° s·ª± ki·ªán n√†o.</p>
                </div>
                <svg width="84" height="84" viewBox="0 0 96 96">
                    <rect rx="18" width="96" height="96" fill="#fff1f6" />
                    <circle cx="48" cy="40" r="20" fill="#ffd0e6" />
                    <path d="M36 62c6 6 24 6 30 0" stroke="#b24a65" stroke-width="3" fill="none" />
                </svg>
            </div>

            <div style="margin-top:10px;">
                <div id="aiPreview" class="ai-card">
                    <div style="display:flex;justify-content:space-between;align-items:center">
                        <div>
                            <div class="small">G·ª£i √Ω h√¥m nay</div>
                            <strong style="color:#5b2440">Talkshow: T∆∞∆°ng lai t·ªï ch·ª©c s·ª± ki·ªán</strong>
                            <div class="small">Th·ª© 4 ‚Ä¢ 19:00 ‚Ä¢ C∆° s·ªü M·ªπ ƒê√¨nh</div>
                        </div>
                        <div>
                            <button class="btn" id="openAiBtn">Xem g·ª£i √Ω</button>
                        </div>
                    </div>
                </div>

                <div style="margin-top:10px" class="features">
                    <div class="feat">üìç
                        <div style="margin-left:8px"><strong>B·∫£ng tin</strong>
                            <div class="small">S·ª± ki·ªán m·ªõi</div>
                        </div>
                    </div>
                    <div class="feat">üîî
                        <div style="margin-left:8px"><strong>Nh·∫Øc l·ªãch</strong>
                            <div class="small">Kh√¥ng lo qu√™n</div>
                        </div>
                    </div>
                    <div class="feat">üöó
                        <div style="margin-left:8px"><strong>Gh√©p xe</strong>
                            <div class="small">An to√†n</div>
                        </div>
                    </div>
                    <div class="feat">ü§ñ
                        <div style="margin-left:8px"><strong>G·ª£i √Ω AI</strong>
                            <div class="small">Event ph√π h·ª£p</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <main id="screen-feed" class="screen hidden">
        <div class="header">
            <div>
                <h1 class="main">B·∫£ng tin</h1>
                <p class="sub">C√°c s·ª± ki·ªán ƒëang m·ªü v√† ph√π h·ª£p v·ªõi b·∫°n</p>
            </div>
            <div class="avatar">EB</div>
        </div>
        <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
                <input placeholder="T√¨m ki·∫øm s·ª± ki·ªán, ƒë·ªãa ƒëi·ªÉm..." style="flex:1;padding:10px;border-radius:12px;border:1px solid #ffdfe8;background:white;margin-right:8px" />
                <button class="btn">T√¨m</button>
            </div>

            <div class="event">
                <div>
                    <h3>Ng√†y h·ªôi t√¨nh nguy·ªán ƒêHQGHN</h3>
                    <p class="small">Th·ª© 7, 09:00 - 16:00 ¬∑ C∆° s·ªü M·ªπ ƒê√¨nh</p>
                    <div style="margin-top:8px"><span class="chip">Mi·ªÖn ph√≠</span>
                    </div>
                </div>
                <div style="text-align:right">
                    <button class="btn" onclick="alert('ƒêƒÉng k√Ω (demo)')">ƒêƒÉng k√Ω</button>
                </div>
            </div>

            <div style="margin-top:10px">
                <div class="small" style="margin-bottom:8px">B·ªô l·ªçc nhanh</div>
                <div style="display:flex;gap:8px">
                    <div style="padding:8px;border-radius:12px;background:white">Theo ng√†nh</div>
                    <div style="padding:8px;border-radius:12px;background:white">G·∫ßn t√¥i</div>
                    <div style="padding:8px;border-radius:12px;background:white">Mi·ªÖn ph√≠</div>
                </div>
            </div>
        </div>
    </main>

    <main id="screen-ai" class="screen hidden">
        <div class="header">
            <div>
                <h1 class="main">G·ª£i √Ω cho b·∫°n</h1>
                <p class="sub">AI ƒë√£ ph√¢n t√≠ch l·ªãch c·ªßa b·∫°n v√† ch·ªçn ra nh·ªØng event ph√π h·ª£p</p>
            </div>
            <div class="avatar">ü§ñ</div>
        </div>

        <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center">
                <div>
                    <div class="small">B·∫°n r·∫£nh: 18:00 - 21:00 (H√¥m nay)</div>
                    <h3 style="margin:6px 0">Talkshow Future of Event Tech</h3>
                    <div class="small">C√°ch 1.2 km ¬∑ Th·ª© 4, 19:00</div>
                </div>
                <div style="text-align:right">
                    <div style="margin-bottom:10px">
                        <button class="btn" onclick="alert('Th√™m v√†o l·ªãch (demo)')">Tham gia</button>
                    </div>
                    <div style="font-size:12px;color:var(--muted)">∆Øu ti√™n: 92%</div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="small" style="margin-bottom:6px">L·ªùi khuy√™n t·ª´ EventBuddy AI</div>
            <div id="aiBubble" class="ai-bubble typing">...</div>
            <div class="ai-controls">
                <button id="prevAi" class="btn ghost">‚Äπ</button>
                <button id="saveLaterBtn" class="btn ghost">L∆∞u cho sau</button>
                <button id="dismissBtn" class="btn ghost">Kh√¥ng quan t√¢m</button>
                <button id="nextAi" class="btn">G·ª£i √Ω sau</button>
            </div>
        </div>
    </main>

    <main id="screen-route" class="screen hidden">
        <div class="header">
            <div>
                <h1 class="main">L·∫≠p l·ªô tr√¨nh</h1>
                <p class="sub">G·ª£i √Ω tuy·∫øn v√† nh√≥m gh√©p xe t·ª´ H√≤a L·∫°c</p>
            </div>
            <div class="avatar">üöó</div>
        </div>
        <div class="card">
            <div class="map">B·∫£n ƒë·ªì minh h·ªça (demo)</div>
            <div class="routecard">
                <div>
                    <div style="font-weight:700">Tuy·∫øn ƒë·ªÅ xu·∫•t</div>
                    <div class="small">KTX H√≤a L·∫°c ‚Üí M·ªπ ƒê√¨nh (Bus + gh√©p xe)</div>
                </div>
                <div style="text-align:right">
                    <div class="small">ETA: 45 ph√∫t</div>
                    <button class="btn" onclick="alert('Gh√©p xe (demo)')">Gh√©p xe</button>
                </div>
            </div>
            <div style="margin-top:12px" class="card">
                <div style="font-weight:700;margin-bottom:6px">Nh·ªØng ng∆∞·ªùi c√πng ƒëi</div>
                <div style="display:flex;gap:8px">
                    <div style="background:#fff;padding:8px;border-radius:12px">Lan (K16) ¬∑ 2 gh·∫ø</div>
                    <div style="background:#fff;padding:8px;border-radius:12px">Minh (K17) ¬∑ 1 gh·∫ø</div>
                </div>
            </div>
        </div>
    </main>

    <!-- bottom nav -->
    <div class="bottomnav">
        <div class="navwrap">
            <div class="nav" role="navigation" aria-label="Main">
                <button id="btn-home" class="active">Trang ch·ªß</button>
                <button id="btn-feed">B·∫£ng tin</button>
                <button id="btn-ai">G·ª£i √Ω AI</button>
                <button id="btn-route">L·ªô tr√¨nh</button>
            </div>
        </div>
    </div>

    <footer></footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // safe element refs
            const slidesEl = document.getElementById('slides');
            const dots = [document.getElementById('dot0'), document.getElementById('dot1'), document.getElementById('dot2')];
            const onboardWrap = document.getElementById('onboardWrap');
            const toast = document.getElementById('toast');
            const aiBubble = document.getElementById('aiBubble');
            const aiPreview = document.getElementById('aiPreview');
            const openAiBtn = document.getElementById('openAiBtn');

            // onboarding
            let slideIndex = 0;

            function updateSlides() {
                    if (!slidesEl) return;
                    slidesEl.style.transform = `translateX(-${slideIndex * 100}%)`;
                    dots.forEach((d, i) => {
                        if (d) d.classList.toggle('active', i === slideIndex);
                    });
                }
                // controls
            const next1 = document.getElementById('next1');
            const next2 = document.getElementById('next2');
            const laterBtn = document.getElementById('laterBtn');
            const startBtn = document.getElementById('startBtn');
            const skipBtn = document.getElementById('skipBtn');
            if (next1) next1.addEventListener('click', () => {
                slideIndex = 1;
                updateSlides();
            });
            if (next2) next2.addEventListener('click', () => {
                slideIndex = 2;
                updateSlides();
            });
            if (laterBtn) laterBtn.addEventListener('click', () => {
                if (onboardWrap) onboardWrap.style.display = 'none';
            });
            if (skipBtn) skipBtn.addEventListener('click', () => {
                if (onboardWrap) onboardWrap.style.display = 'none';
            });
            if (startBtn) startBtn.addEventListener('click', () => {
                if (onboardWrap) onboardWrap.style.display = 'none';
                try {
                    localStorage.setItem('eventbuddy_onboard_seen', '1');
                } catch (e) {}
            });

            try {
                if (localStorage.getItem('eventbuddy_onboard_seen') === '1' && onboardWrap) onboardWrap.style.display = 'none';
            } catch (e) {}

            updateSlides();

            // navigation (screens)
            function hideAll() {
                ['home', 'feed', 'ai', 'route'].forEach(s => {
                    const el = document.getElementById('screen-' + s);
                    if (el) {
                        el.classList.add('hidden');
                        el.classList.remove('show');
                    }
                    const btn = document.getElementById('btn-' + s);
                    if (btn) btn.classList.remove('active');
                });
            }

            function show(screen) {
                    hideAll();
                    const el = document.getElementById('screen-' + screen);
                    if (!el) return;
                    el.classList.remove('hidden');
                    void el.offsetWidth; // reflow
                    el.classList.add('show');
                    const btn = document.getElementById('btn-' + screen);
                    if (btn) btn.classList.add('active');
                }
                ['home', 'feed', 'ai', 'route'].forEach(s => {
                    const btn = document.getElementById('btn-' + s);
                    if (btn) btn.addEventListener('click', () => show(s));
                });

            // AI typing + controls
            const aiLines = [
                "Hehe, m√¨nh th·∫•y b·∫°n r·∫£nh t·ªëi nay 18:00‚Äì21:00 n√®! C√≥ m·ªôt Talkshow hay v·ªÅ Event Tech g·∫ßn b·∫°n, mu·ªën tham gia kh√¥ng? üí°",
                "G·ª£i √Ω n√®: Workshop k·ªπ nƒÉng t·ªï ch·ª©c ph√π h·ª£p v·ªõi l·ªãch h·ªçc c·ªßa b·∫°n ‚Äî c√≥ ch·ª©ng nh·∫≠n v√† free snack n·ªØa nha üç™",
                "N·∫øu b·∫°n mu·ªën ti·∫øt ki·ªám, m√¨nh g·ª£i √Ω gh√©p xe t·ª´ KTX H√≤a L·∫°c l√∫c 16:30 ‚Äî c√≥ 3 b·∫°n ƒëi r·ªìi ƒë√≥, r·ªß th√™m nh√©! üöóüí®",
                "M·∫πo nh·ªè: tham gia 2 s·ª± ki·ªán c√πng ch·ªß ƒë·ªÅ trong 1 th√°ng s·∫Ω gi√∫p b·∫°n nh·∫≠n badge 'Event Pro' ƒë√≥! ‚ú®",
                "Nh·∫Øc b·∫°n: th·ªùi ti·∫øt h√¥m nay c√≥ th·ªÉ m∆∞a nh·∫π, mang √°o m∆∞a v√† ƒë·∫øn s·ªõm 10 ph√∫t ƒë·ªÉ check-in d·ªÖ h∆°n ‚òî"
            ];
            let aiIndex = 0;

            function typeText(text, el, speed = 18) {
                if (!el) return;
                el.classList.add('typing');
                el.textContent = '';
                let i = 0;
                clearInterval(el._typingTimer);
                el._typingTimer = setInterval(() => {
                    if (i >= text.length) {
                        clearInterval(el._typingTimer);
                        el.classList.remove('typing');
                        return;
                    }
                    el.textContent += text.charAt(i++);
                }, speed);
            }

            function showAi(idx) {
                aiIndex = (idx + aiLines.length) % aiLines.length;
                if (!aiBubble) return;
                aiBubble.style.opacity = 0;
                setTimeout(() => {
                    aiBubble.style.transition = 'opacity .26s ease';
                    aiBubble.style.opacity = 1;
                }, 60);
                typeText(aiLines[aiIndex], aiBubble, 18);
            }

            const prevAiBtn = document.getElementById('prevAi');
            const nextAiBtn = document.getElementById('nextAi');
            const saveLaterBtn = document.getElementById('saveLaterBtn');
            const dismissBtn = document.getElementById('dismissBtn');

            if (prevAiBtn) prevAiBtn.addEventListener('click', () => showAi(aiIndex - 1));
            if (nextAiBtn) nextAiBtn.addEventListener('click', () => showAi(aiIndex + 1));
            if (saveLaterBtn) saveLaterBtn.addEventListener('click', () => {
                try {
                    localStorage.setItem('eventbuddy_ai_pref', 'saved');
                } catch (e) {};
                showToast('ƒê√£ l∆∞u g·ª£i √Ω ‚Äî xem l·∫°i trong m·ª•c "ƒê√£ l∆∞u"');
            });
            if (dismissBtn) dismissBtn.addEventListener('click', () => {
                try {
                    localStorage.setItem('eventbuddy_ai_pref', 'dismissed');
                } catch (e) {};
                if (aiPreview) aiPreview.style.display = 'none';
                showToast('ƒê√£ t·∫Øt g·ª£i √Ω AI ‚Äî b·∫≠t l·∫°i trong C√†i ƒë·∫∑t');
            });
            if (openAiBtn) openAiBtn.addEventListener('click', () => show('ai'));

            function showToast(text = 'ƒê√£ l∆∞u') {
                if (!toast) return;
                toast.textContent = text;
                toast.classList.add('show');
                setTimeout(() => toast.classList.remove('show'), 2400);
            }

            // If AI dismissed earlier, hide preview
            try {
                if (localStorage.getItem('eventbuddy_ai_pref') === 'dismissed' && aiPreview) aiPreview.style.display = 'none';
            } catch (e) {}

            // initialize
            showAi(0);

            // global error fallback
            window.addEventListener('error', function(e) {
                console.warn('Runtime error (ignored):', e && e.message);
                showToast('C√≥ l·ªói nh·ªè, ƒë√£ kh√¥i ph·ª•c giao di·ªán.');
            });

        }); // DOMContentLoaded
    </script>
</body>

</html>
